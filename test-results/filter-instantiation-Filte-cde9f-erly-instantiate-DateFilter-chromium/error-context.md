# Test info

- Name: Filter Instantiation Check >> should properly instantiate DateFilter
- Location: /Users/ryan/code-repos/github/ryanrozich/ag-grid-react-components/tests/e2e/filter-instantiation.spec.ts:4:3

# Error details

```
Error: expect(received).toBe(expected) // Object.is equality

Expected: true
Received: false
    at /Users/ryan/code-repos/github/ryanrozich/ag-grid-react-components/tests/e2e/filter-instantiation.spec.ts:107:50
```

# Page snapshot

```yaml
- banner:
  - heading "AG Grid React Components" [level=1]
  - navigation:
    - link "Home":
      - /url: /
    - link "Demo":
      - /url: /demo
    - link "Docs":
      - /url: /docs
  - img
  - text: MIT License
  - link "GitHub":
    - /url: https://github.com/ryanrozich/ag-grid-react-components
    - img
    - text: GitHub
- heading "Project Tasks" [level=1]
- paragraph: Manage and track your team's progress
- textbox "Search tasks..."
- img
- button "Quick filter options":
  - text: All Time
  - img
- button "Quick filter options":
  - text: Task type
  - img
- text: "Due Date: Today"
- button "Remove Due Date filter": ×
- button "Clear all filters": Clear all
- img
- paragraph: Number of Tasks
- paragraph: "9"
- img
- paragraph: Total Budget
- paragraph: $19,675
- img
- paragraph: Progress
- paragraph: 49.2%
- img
- paragraph: Budget Remaining
- paragraph: $10,627
- text: 1 to 10 of 10. Page 1 of 1
- grid:
  - rowgroup:
    - row "ID Task Name Category Priority Assignee Due Date Budget Status Progress":
      - columnheader "ID"
      - columnheader "Task Name"
      - columnheader "Category"
      - columnheader "Priority"
      - columnheader "Assignee"
      - columnheader "Due Date"
      - columnheader "Budget"
      - columnheader "Status"
      - columnheader "Progress"
  - rowgroup:
    - row "153 [PROJ-1153] Handle null pointer exception in API client (Sprint 24) 🐛 Bug Critical Priya Sharma Priya Sharma 6/30/2025 $375 In Progress 45%":
      - gridcell "153"
      - gridcell "[PROJ-1153] Handle null pointer exception in API client (Sprint 24)"
      - gridcell "🐛 Bug"
      - gridcell "Critical"
      - gridcell "Priya Sharma Priya Sharma":
        - img "Priya Sharma"
        - text: Priya Sharma
      - gridcell "6/30/2025"
      - gridcell "$375"
      - gridcell "In Progress"
      - gridcell "45%"
    - row "402 [FRONTEND-1402] Add visual regression tests (Performance Sprint) 🧪 Testing Critical Michael Anderson Michael Anderson 6/30/2025 $3,475 Blocked 10%":
      - gridcell "402"
      - gridcell "[FRONTEND-1402] Add visual regression tests (Performance Sprint)"
      - gridcell "🧪 Testing"
      - gridcell "Critical"
      - gridcell "Michael Anderson Michael Anderson":
        - img "Michael Anderson"
        - text: Michael Anderson
      - gridcell "6/30/2025"
      - gridcell "$3,475"
      - gridcell "Blocked"
      - gridcell "10%"
    - row "795 [API-1795] Test cross-browser compatibility 🧪 Testing High Michael Anderson Michael Anderson 6/30/2025 $850 Blocked 26%":
      - gridcell "795"
      - gridcell "[API-1795] Test cross-browser compatibility"
      - gridcell "🧪 Testing"
      - gridcell "High"
      - gridcell "Michael Anderson Michael Anderson":
        - img "Michael Anderson"
        - text: Michael Anderson
      - gridcell "6/30/2025"
      - gridcell "$850"
      - gridcell "Blocked"
      - gridcell "26%"
    - row "140 [AUTH-1140] Resolve memory leak in data grid (Performance Sprint) 🐛 Bug Medium Michael Anderson Michael Anderson 6/30/2025 $3,950 Blocked 38%":
      - gridcell "140"
      - gridcell "[AUTH-1140] Resolve memory leak in data grid (Performance Sprint)"
      - gridcell "🐛 Bug"
      - gridcell "Medium"
      - gridcell "Michael Anderson Michael Anderson":
        - img "Michael Anderson"
        - text: Michael Anderson
      - gridcell "6/30/2025"
      - gridcell "$3,950"
      - gridcell "Blocked"
      - gridcell "38%"
    - row "37 [CORE-1037] Configure Docker containers (Sprint 27) 🔧 DevOps Medium Ryan Thomas Ryan Thomas 6/30/2025 $2,025 Done 100%":
      - gridcell "37"
      - gridcell "[CORE-1037] Configure Docker containers (Sprint 27)"
      - gridcell "🔧 DevOps"
      - gridcell "Medium"
      - gridcell "Ryan Thomas Ryan Thomas":
        - img "Ryan Thomas"
        - text: Ryan Thomas
      - gridcell "6/30/2025"
      - gridcell "$2,025"
      - gridcell "Done"
      - gridcell "100%"
    - row "803 [MOBILE-1803] Update README with examples (Sprint 23) 📝 Documentation Low Olivia Brown Olivia Brown 6/30/2025 $6,175 In Progress 38%":
      - gridcell "803"
      - gridcell "[MOBILE-1803] Update README with examples (Sprint 23)"
      - gridcell "📝 Documentation"
      - gridcell "Low"
      - gridcell "Olivia Brown Olivia Brown":
        - img "Olivia Brown"
        - text: Olivia Brown
      - gridcell "6/30/2025"
      - gridcell "$6,175"
      - gridcell "In Progress"
      - gridcell "38%"
    - row "225 [MOBILE-1225] Test error boundary behavior (Q1 Goals) 🧪 Testing Medium Daniel Kim Daniel Kim 6/30/2025 $1,875 Done 100%":
      - gridcell "225"
      - gridcell "[MOBILE-1225] Test error boundary behavior (Q1 Goals)"
      - gridcell "🧪 Testing"
      - gridcell "Medium"
      - gridcell "Daniel Kim Daniel Kim":
        - img "Daniel Kim"
        - text: Daniel Kim
      - gridcell "6/30/2025"
      - gridcell "$1,875"
      - gridcell "Done"
      - gridcell "100%"
    - row "724 [UI-1724] Reduce API call frequency (Q1 Goals) ⚡ Performance Low Michael Anderson Michael Anderson 6/30/2025 $125 Blocked 21%":
      - gridcell "724"
      - gridcell "[UI-1724] Reduce API call frequency (Q1 Goals)"
      - gridcell "⚡ Performance"
      - gridcell "Low"
      - gridcell "Michael Anderson Michael Anderson":
        - img "Michael Anderson"
        - text: Michael Anderson
      - gridcell "6/30/2025"
      - gridcell "$125"
      - gridcell "Blocked"
      - gridcell "21%"
    - row "590 [UI-1590] Consolidate duplicate code (Sprint 26) ♻️ Refactor Low John Robinson John Robinson 6/30/2025 $825 In Review 65%":
      - gridcell "590"
      - gridcell "[UI-1590] Consolidate duplicate code (Sprint 26)"
      - gridcell "♻️ Refactor"
      - gridcell "Low"
      - gridcell "John Robinson John Robinson":
        - img "John Robinson"
        - text: John Robinson
      - gridcell "6/30/2025"
      - gridcell "$825"
      - gridcell "In Review"
      - gridcell "65%"
  - rowgroup
  - rowgroup
  - rowgroup
  - rowgroup:
    - row "$19,675 49%":
      - gridcell
      - gridcell
      - gridcell
      - gridcell
      - gridcell
      - gridcell
      - gridcell "$19,675"
      - gridcell
      - gridcell "49%"
  - rowgroup
- tablist:
  - tab "Columns"
  - tab "Filters"
- status
- status
- status
- text: "Page Size:"
- combobox "Page Size": "25"
- button "First Page" [disabled]: 
- button "Previous Page" [disabled]: 
- text: Page 1 of 1
- button "Next Page" [disabled]: 
- button "Last Page" [disabled]: 
```

# Test source

```ts
   7 |       console.log("BROWSER:", msg.text());
   8 |     });
   9 |
   10 |     // Navigate to the demo page
   11 |     await page.goto("/demo");
   12 |
   13 |     // Wait for grid to be ready
   14 |     await page.waitForSelector(".ag-root-wrapper");
   15 |     await page.waitForTimeout(1000);
   16 |
   17 |     // Check if DateFilter is being properly instantiated
   18 |     const filterInfo = await page.evaluate(async () => {
   19 |       const api = window.agGridApi;
   20 |       if (!api) return { error: "No API found" };
   21 |
   22 |       // Get the filter instance
   23 |       const filterPromise = api.getColumnFilterInstance("dueDate");
   24 |
   25 |       try {
   26 |         const filterInstance = await filterPromise;
   27 |         return {
   28 |           isPromise: true,
   29 |           resolvedType: filterInstance ? filterInstance.constructor.name : null,
   30 |           hasDoesFilterPass:
   31 |             typeof filterInstance?.doesFilterPass === "function",
   32 |           hasSetModel: typeof filterInstance?.setModel === "function",
   33 |           hasGetModel: typeof filterInstance?.getModel === "function",
   34 |         };
   35 |       } catch (error: any) {
   36 |         return {
   37 |           isPromise: true,
   38 |           error: error.message,
   39 |         };
   40 |       }
   41 |     });
   42 |
   43 |     console.log(
   44 |       "Filter instantiation info:",
   45 |       JSON.stringify(filterInfo, null, 2),
   46 |     );
   47 |
   48 |     // Now try to manually set a filter model
   49 |     const filterResult = await page.evaluate(async () => {
   50 |       const api = window.agGridApi;
   51 |       if (!api) return { error: "No API found" };
   52 |
   53 |       const initialRowCount = api.getDisplayedRowCount();
   54 |
   55 |       // Get the filter instance first
   56 |       const filterInstancePromise = api.getColumnFilterInstance("dueDate");
   57 |       const filterInstance = await filterInstancePromise;
   58 |
   59 |       console.log("Filter instance resolved:", {
   60 |         hasSetModel: typeof filterInstance?.setModel === "function",
   61 |         hasGetModel: typeof filterInstance?.getModel === "function",
   62 |         filterType: filterInstance?.constructor.name,
   63 |       });
   64 |
   65 |       // Set a filter model
   66 |       const filterModel = {
   67 |         mode: "relative",
   68 |         type: "equals",
   69 |         expressionFrom: "Today",
   70 |       };
   71 |
   72 |       // Try setting the model directly on the filter instance
   73 |       if (filterInstance && typeof filterInstance.setModel === "function") {
   74 |         console.log("Calling setModel directly on filter instance");
   75 |         filterInstance.setModel(filterModel);
   76 |       }
   77 |
   78 |       // Also try via the API
   79 |       api.setFilterModel({ dueDate: filterModel });
   80 |       api.onFilterChanged();
   81 |
   82 |       // Wait a bit for the filter to apply
   83 |       return new Promise((resolve) => {
   84 |         setTimeout(() => {
   85 |           const finalRowCount = api.getDisplayedRowCount();
   86 |           const currentFilterModel = api.getFilterModel();
   87 |
   88 |           resolve({
   89 |             initialRowCount,
   90 |             finalRowCount,
   91 |             filterModelSet:
   92 |               JSON.stringify(currentFilterModel) ===
   93 |               JSON.stringify(filterModel),
   94 |             currentFilterModel,
   95 |             wasSetModelCalled: (window as any).setModelWasCalled || false,
   96 |           });
   97 |         }, 1000);
   98 |       });
   99 |     });
  100 |
  101 |     console.log(
  102 |       "Filter application result:",
  103 |       JSON.stringify(filterResult, null, 2),
  104 |     );
  105 |
  106 |     // Check if the filter was actually applied
> 107 |     expect((filterResult as any).filterModelSet).toBe(true);
      |                                                  ^ Error: expect(received).toBe(expected) // Object.is equality
  108 |
  109 |     // The row count should have changed (unless by coincidence all rows match)
  110 |     console.log(
  111 |       `Row count changed from ${(filterResult as any).initialRowCount} to ${(filterResult as any).finalRowCount}`,
  112 |     );
  113 |   });
  114 | });
  115 |
```