# Test info

- Name: Filter Presets - URL Sharing >> should generate shareable URL for saved preset
- Location: /Users/ryan/code-repos/github/ryanrozich/ag-grid-react-components-worktrees/ag-grid-react-components/tests/e2e/filter-presets-sharing.spec.ts:74:3

# Error details

```
TimeoutError: page.waitForSelector: Timeout 10000ms exceeded.
Call log:
  - waiting for locator('.ag-root-wrapper') to be visible

    at /Users/ryan/code-repos/github/ryanrozich/ag-grid-react-components-worktrees/ag-grid-react-components/tests/e2e/filter-presets-sharing.spec.ts:19:16
```

# Page snapshot

```yaml
- banner:
  - heading "AG Grid React Components" [level=1]
  - navigation:
    - link "Home":
      - /url: /
    - link "Demo":
      - /url: /demo
    - link "Docs":
      - /url: /docs
  - button "Show version details": v0.2.0-rc1+31 fix/e2e-test-selectors
  - link "NPM":
    - /url: https://www.npmjs.com/package/ag-grid-react-components
    - img
    - text: NPM
  - link "GitHub":
    - /url: https://github.com/ryanrozich/ag-grid-react-components
    - img
    - text: GitHub
- text: Pre-release v0.2.0-rc1 Minimal Bundle Size MIT License
- heading "Supercharge AG Grid with modern UX components" [level=1]
- paragraph: Transform AG Grid from a powerful data table into a delightful user experience. These production-ready React components add the filtering, presets, and state management features your users have been asking for.
- button "View Live Demo"
- button "Documentation"
- img "AG Grid React Components showcase - DateFilter with relative date expressions, QuickFilterDropdown with presets, and ActiveFilters display"
- text: DateFilter QuickFilterDropdown ActiveFilters
- img
- heading "Start in minutes" [level=3]
- list:
  - listitem: → Single npm install
  - listitem: → Works with AG Grid Community & Enterprise
  - listitem: → TypeScript support out of the box
  - listitem: "→ Minimal bundle: starts at 25KB"
- img
- heading "Style it your way" [level=3]
- list:
  - listitem: → Headless by default
  - listitem: → CSS modules for scoped styles
  - listitem: → Override any style with className
  - listitem: → Works with Tailwind, CSS-in-JS, etc.
- img
- heading "Configure everything" [level=3]
- list:
  - listitem: → Pluggable date picker adapters
  - listitem: → Customizable date expressions
  - listitem: → Extensible filter presets
  - listitem: → Override any behavior with callbacks
- paragraph: Essential components for modern data applications
- paragraph: "AG Grid gives you the foundation. These components add the polish your users expect: intuitive filtering, visible filter pills, shareable presets, and persistent state. Built for teams who use grids as their primary workspace."
- term:
  - img
  - text: Relative Date Filtering
- definition:
  - paragraph: Natural language date filters like "last 30 days" that actually update every day. Your saved views and shared links always show current data.
- term:
  - img
  - text: Quick Filter Menus
- definition:
  - paragraph: One-click access to your most-used filters. Configure dropdowns for "High Priority", "Due This Week", or any complex filter combination your team needs.
- term:
  - img
  - text: Active Filter Pills
- definition:
  - paragraph: Stop hunting for tiny blue dots. Display active filters as clear, interactive pills that users can see and remove with a single click.
- term:
  - img
  - text: Filter Presets & Sharing
- definition:
  - paragraph: Save complex filter combinations as named presets. Export and share them with your team, or copy a URL that captures your exact grid state.
- paragraph: Seamlessly integrates with your existing AG Grid setup
- paragraph: Drop-in components with zero dependencies. Use our thoughtful defaults or customize every detail with headless flexibility.
- code: "npm install ag-grid-react-components // Just add to your existing AG Grid setup import { createDateFilter } from 'ag-grid-react-components'; const DateFilter = createDateFilter(); const columnDefs = [{ field: 'dueDate', filter: DateFilter, filterParams: { defaultMode: 'relative' } }];"
- img
- heading "Start in minutes" [level=3]
- list:
  - listitem: → Single npm install
  - listitem: → Works with AG Grid Community & Enterprise
  - listitem: → TypeScript support out of the box
  - listitem: "→ Minimal bundle: starts at 25KB"
- img
- heading "Style it your way" [level=3]
- list:
  - listitem: → Headless by default
  - listitem: → CSS modules for scoped styles
  - listitem: → Override any style with className
  - listitem: → Works with Tailwind, CSS-in-JS, etc.
- img
- heading "Configure everything" [level=3]
- list:
  - listitem: → Pluggable date picker adapters
  - listitem: → Customizable date expressions
  - listitem: → Extensible filter presets
  - listitem: → Override any behavior with callbacks
- contentinfo:
  - heading "AG Grid React Components" [level=3]
  - paragraph: Supercharge AG Grid with modern UX components. Tree-shakeable, headless, and released under the MIT License.
  - heading "Resources" [level=3]
  - list:
    - listitem:
      - link "GitHub Repository":
        - /url: https://github.com/ryanrozich/ag-grid-react-components
    - listitem:
      - link "NPM Package":
        - /url: https://www.npmjs.com/package/ag-grid-react-components
    - listitem:
      - link "AG Grid Documentation":
        - /url: https://www.ag-grid.com/react-data-grid/
  - heading "Community" [level=3]
  - list:
    - listitem:
      - link "Report Issues":
        - /url: https://github.com/ryanrozich/ag-grid-react-components/issues
    - listitem:
      - link "Suggest Features":
        - /url: https://github.com/ryanrozich/ag-grid-react-components/issues/new?labels=enhancement
    - listitem:
      - link "View Pull Requests":
        - /url: https://github.com/ryanrozich/ag-grid-react-components/pulls
  - heading "Legal" [level=3]
  - paragraph: This project is not affiliated with AG Grid Ltd.
  - paragraph: Use at your own risk. No warranty provided.
  - paragraph: © 2025 Ryan Rozich. All rights reserved.
```

# Test source

```ts
   1 | import { test, expect } from "@playwright/test";
   2 | import type { Page } from "@playwright/test";
   3 |
   4 | /**
   5 |  * E2E tests for filter preset sharing via URL
   6 |  * Tests the functionality of generating shareable URLs and loading presets from URLs
   7 |  */
   8 |
   9 | test.describe("Filter Presets - URL Sharing", () => {
   10 |   let page: Page;
   11 |
   12 |   test.beforeEach(async ({ page: testPage }) => {
   13 |     page = testPage;
   14 |
   15 |     // Navigate to the demo page
   16 |     await page.goto("/");
   17 |
   18 |     // Wait for the grid to be ready
>  19 |     await page.waitForSelector(".ag-root-wrapper", { timeout: 10000 });
      |                ^ TimeoutError: page.waitForSelector: Timeout 10000ms exceeded.
   20 |   });
   21 |
   22 |   test("should generate shareable URL for current filters", async () => {
   23 |     // Apply some filters
   24 |     await applyTestFilters(page);
   25 |
   26 |     // Open share dialog
   27 |     await page.click('[data-testid="share-filters-button"]');
   28 |
   29 |     // Get the generated URL
   30 |     const shareUrlInput = page.locator('[data-testid="share-url-input"]');
   31 |     await expect(shareUrlInput).toBeVisible();
   32 |
   33 |     const shareUrl = await shareUrlInput.inputValue();
   34 |
   35 |     // Verify URL format
   36 |     expect(shareUrl).toContain(page.url().split("?")[0]); // Base URL
   37 |     expect(shareUrl).toContain("?p="); // Parameter
   38 |
   39 |     // Verify copy button works
   40 |     await page.click('[data-testid="copy-share-url-button"]');
   41 |
   42 |     // Check for success message
   43 |     await expect(
   44 |       page.locator('[data-testid="url-copied-message"]'),
   45 |     ).toBeVisible();
   46 |     await expect(
   47 |       page.locator('[data-testid="url-copied-message"]'),
   48 |     ).toContainText("URL copied to clipboard");
   49 |   });
   50 |
   51 |   test("should load filters from shareable URL", async () => {
   52 |     // First, create a shareable URL
   53 |     await applyTestFilters(page);
   54 |     await page.click('[data-testid="share-filters-button"]');
   55 |     const shareUrl = await page
   56 |       .locator('[data-testid="share-url-input"]')
   57 |       .inputValue();
   58 |
   59 |     // Navigate to a clean state
   60 |     await page.goto("/");
   61 |     await page.waitForSelector(".ag-root-wrapper", { timeout: 10000 });
   62 |
   63 |     // Verify no filters are active
   64 |     await expect(page.locator(".ag-filter-active")).not.toBeVisible();
   65 |
   66 |     // Navigate to the shareable URL
   67 |     await page.goto(shareUrl);
   68 |     await page.waitForSelector(".ag-root-wrapper", { timeout: 10000 });
   69 |
   70 |     // Verify filters are applied from URL
   71 |     await verifyFiltersApplied(page);
   72 |   });
   73 |
   74 |   test("should generate shareable URL for saved preset", async () => {
   75 |     // Create a preset
   76 |     await createTestPreset(page, "Shareable Preset");
   77 |
   78 |     // Open preset manager
   79 |     await page.click('[data-testid="preset-manager-button"]');
   80 |
   81 |     // Click share button for the preset
   82 |     await page.click(
   83 |       '[data-testid="preset-item-Shareable Preset"] [data-testid="share-preset-button"]',
   84 |     );
   85 |
   86 |     // Verify share dialog opens with preset URL
   87 |     const shareUrlInput = page.locator('[data-testid="share-url-input"]');
   88 |     await expect(shareUrlInput).toBeVisible();
   89 |
   90 |     const shareUrl = await shareUrlInput.inputValue();
   91 |     expect(shareUrl).toContain("?p="); // Should contain preset data
   92 |   });
   93 |
   94 |   test("should handle loading invalid URL gracefully", async () => {
   95 |     // Navigate to URL with invalid preset data
   96 |     await page.goto("/?p=invalid-data-xyz");
   97 |
   98 |     // Wait for page to load
   99 |     await page.waitForSelector(".ag-root-wrapper", { timeout: 10000 });
  100 |
  101 |     // Should show error message
  102 |     await expect(
  103 |       page.locator('[data-testid="invalid-url-message"]'),
  104 |     ).toBeVisible();
  105 |     await expect(
  106 |       page.locator('[data-testid="invalid-url-message"]'),
  107 |     ).toContainText("Unable to load filters from URL");
  108 |
  109 |     // Grid should still be functional
  110 |     await expect(page.locator(".ag-root-wrapper")).toBeVisible();
  111 |   });
  112 |
  113 |   test("should update URL when filters change", async () => {
  114 |     // Enable URL sync
  115 |     await page.click('[data-testid="settings-button"]');
  116 |     await page.check('[data-testid="url-sync-checkbox"]');
  117 |     await page.click('[data-testid="close-settings"]');
  118 |
  119 |     // Apply initial filter
```