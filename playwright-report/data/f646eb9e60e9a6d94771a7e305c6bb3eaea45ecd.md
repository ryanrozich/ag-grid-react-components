# Test info

- Name: Server-Side API Error Handling >> captures console errors when switching to server-side tab
- Location: /Users/ryan/code-repos/github/ryanrozich/ag-grid-react-components/tests/e2e/server-side-error.spec.ts:86:3

# Error details

```
Error: page.click: Test timeout of 30000ms exceeded.
Call log:
  - waiting for locator('button:has-text("Server-Side Data")')

    at /Users/ryan/code-repos/github/ryanrozich/ag-grid-react-components/tests/e2e/server-side-error.spec.ts:100:16
```

# Test source

```ts
   1 | import { test, expect } from "@playwright/test";
   2 |
   3 | test.describe("Server-Side API Error Handling", () => {
   4 |   test.beforeEach(async ({ page }) => {
   5 |     await page.goto("http://localhost:5173/demo");
   6 |     // Wait for the demo page to fully load
   7 |     await page.waitForLoadState("networkidle");
   8 |   });
   9 |
   10 |   test("should handle server-side API requests without 503 errors", async ({
   11 |     page,
   12 |   }) => {
   13 |     // Monitor network requests
   14 |     const apiResponses: { url: string; status: number }[] = [];
   15 |
   16 |     page.on("response", (response) => {
   17 |       const url = response.url();
   18 |       if (url.includes("/api/")) {
   19 |         apiResponses.push({
   20 |           url,
   21 |           status: response.status(),
   22 |         });
   23 |       }
   24 |     });
   25 |
   26 |     // Switch to server-side tab
   27 |     await page.click('button:has-text("Server-Side Data")');
   28 |
   29 |     // Wait for API calls to complete
   30 |     await page.waitForLoadState("networkidle");
   31 |     await page.waitForTimeout(2000);
   32 |
   33 |     // Check that no API calls returned 503
   34 |     const failedRequests = apiResponses.filter((r) => r.status === 503);
   35 |     if (failedRequests.length > 0) {
   36 |       console.log("Failed 503 requests:", failedRequests);
   37 |     }
   38 |     expect(failedRequests).toHaveLength(0);
   39 |
   40 |     // Check that API calls were successful
   41 |     const successfulRequests = apiResponses.filter((r) => r.status === 200);
   42 |     expect(successfulRequests.length).toBeGreaterThan(0);
   43 |
   44 |     // Verify data loaded successfully
   45 |     await expect(page.locator(".ag-row")).toBeVisible();
   46 |     const rows = await page.locator(".ag-row").count();
   47 |     expect(rows).toBeGreaterThan(0);
   48 |   });
   49 |
   50 |   test("should handle search functionality without API errors", async ({
   51 |     page,
   52 |   }) => {
   53 |     // Monitor network requests for errors
   54 |     const apiErrors: { url: string; status: number }[] = [];
   55 |
   56 |     page.on("response", (response) => {
   57 |       const url = response.url();
   58 |       if (url.includes("/api/") && response.status() >= 500) {
   59 |         apiErrors.push({
   60 |           url,
   61 |           status: response.status(),
   62 |         });
   63 |       }
   64 |     });
   65 |
   66 |     // Switch to server-side tab
   67 |     await page.click('button:has-text("Server-Side Data")');
   68 |
   69 |     // Wait for initial load
   70 |     await page.waitForLoadState("networkidle");
   71 |
   72 |     // Perform search
   73 |     const searchInput = page.locator(
   74 |       'input[placeholder="Search all columns..."]',
   75 |     );
   76 |     await searchInput.fill("test search");
   77 |
   78 |     // Wait for search to complete (debounced)
   79 |     await page.waitForTimeout(500);
   80 |     await page.waitForLoadState("networkidle");
   81 |
   82 |     // Verify no 5xx errors occurred
   83 |     expect(apiErrors).toHaveLength(0);
   84 |   });
   85 |
   86 |   test("captures console errors when switching to server-side tab", async ({
   87 |     page,
   88 |   }) => {
   89 |     // Collect all console messages
   90 |     const consoleMessages: { type: string; text: string }[] = [];
   91 |
   92 |     page.on("console", (msg) => {
   93 |       consoleMessages.push({
   94 |         type: msg.type(),
   95 |         text: msg.text(),
   96 |       });
   97 |     });
   98 |
   99 |     // Click on the server-side tab
> 100 |     await page.click('button:has-text("Server-Side Data")');
      |                ^ Error: page.click: Test timeout of 30000ms exceeded.
  101 |
  102 |     // Wait a bit for any errors to appear
  103 |     await page.waitForTimeout(2000);
  104 |
  105 |     // Check for console errors (excluding AG Grid license warnings)
  106 |     const errors = consoleMessages.filter(
  107 |       (msg) =>
  108 |         msg.type === "error" &&
  109 |         !msg.text.includes("AG Grid Enterprise License") &&
  110 |         !msg.text.includes("License Key Not Found") &&
  111 |         !msg.text.includes("***"),
  112 |     );
  113 |
  114 |     console.log("Actual errors found:", errors.length);
  115 |     errors.forEach((error, index) => {
  116 |       console.log(`Error ${index + 1}:`, error.text);
  117 |     });
  118 |
  119 |     // This test is expected to fail so we can see the errors
  120 |     expect(errors).toHaveLength(0);
  121 |   });
  122 | });
  123 |
```