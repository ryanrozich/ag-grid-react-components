# Test info

- Name: Simple Filter Test >> should filter data when DateFilter is initialized with model
- Location: /Users/ryan/code-repos/github/ryanrozich/ag-grid-datefilter-fix/tests/e2e/simple-filter-test.spec.ts:4:3

# Error details

```
Error: expect(received).toBe(expected) // Object.is equality

Expected: 0
Received: 94
    at /Users/ryan/code-repos/github/ryanrozich/ag-grid-datefilter-fix/tests/e2e/simple-filter-test.spec.ts:88:34
```

# Page snapshot

```yaml
- banner:
  - heading "AG Grid React Components" [level=1]
  - navigation:
    - link "Home":
      - /url: /
    - link "Demo":
      - /url: /demo
    - link "Docs":
      - /url: /docs
  - button "Show version details": v0.2.0-rc1+20 release/v0.2.0-rc1
  - link "NPM":
    - /url: https://www.npmjs.com/package/ag-grid-react-components
    - img
    - text: NPM
  - link "GitHub":
    - /url: https://github.com/ryanrozich/ag-grid-react-components
    - img
    - text: GitHub
- heading "Project Tasks" [level=1]
- paragraph: Manage and track your team's progress
- navigation:
  - button "Client-Side Data"
  - button "Server-Side DataAPI"
  - button "Filter PresetsNEW"
- textbox "Search tasks..."
- img
- button "Quick filter options":
  - text: Time period
  - img
- button "Quick filter options":
  - text: Task type
  - img
- text: "Due Date: Today"
- button "Remove Due Date filter": √ó
- button "Clear all filters": Clear all
- button "My Views":
  - img
  - text: My Views
  - img
- button "Filter view options":
  - img
- img
- paragraph: Number of Tasks
- paragraph: "93"
- img
- paragraph: Total Budget
- paragraph: $418,800
- img
- paragraph: Average Progress
- paragraph: 41.7%
- img
- paragraph: Budget Remaining
- paragraph: $228,531
- grid:
  - rowgroup:
    - row "ID":
      - columnheader "ID"
  - rowgroup:
    - row "Column with Header Selection Task Status Priority Category Assignee Due Date % Delivered Value":
      - columnheader "Column with Header Selection":
        - checkbox "Column with Header Selection"
      - columnheader "Task"
      - columnheader "Status"
      - columnheader "Priority"
      - columnheader "Category"
      - columnheader "Assignee"
      - columnheader "Due Date"
      - columnheader "% Delivered"
      - columnheader "Value"
  - rowgroup:
    - row "INFRA-1080":
      - gridcell "INFRA-1080"
    - row "DATA-2483":
      - gridcell "DATA-2483"
    - row "AUTH-2583":
      - gridcell "AUTH-2583"
    - row "APP-3486":
      - gridcell "APP-3486"
    - row "WEB-4749":
      - gridcell "WEB-4749"
    - row "ADMIN-4988":
      - gridcell "ADMIN-4988"
    - row "WEB-5121":
      - gridcell "WEB-5121"
    - row "MOBILE-1288":
      - gridcell "MOBILE-1288"
    - row "FRONTEND-3627":
      - gridcell "FRONTEND-3627"
    - row "UI-4920":
      - gridcell "UI-4920"
    - row "AUTH-5522":
      - gridcell "AUTH-5522"
    - row "UI-5708":
      - gridcell "UI-5708"
    - row "CORE-9431":
      - gridcell "CORE-9431"
    - row "CORE-2442":
      - gridcell "CORE-2442"
    - row "FRONTEND-5064":
      - gridcell "FRONTEND-5064"
    - row "API-5686":
      - gridcell "API-5686"
    - row "BACKEND-5776":
      - gridcell "BACKEND-5776"
    - row "AUTH-6734":
      - gridcell "AUTH-6734"
  - rowgroup:
    - row "Press Space to toggle row selection (unchecked) Reduce API call frequency (Sprint 26) Blocked Critical ‚ö° Performance David Lee David Lee 7/9/2025 37% $350":
      - gridcell "Press Space to toggle row selection (unchecked)":
        - checkbox "Press Space to toggle row selection (unchecked)"
      - gridcell "Reduce API call frequency (Sprint 26)"
      - gridcell "Blocked"
      - gridcell "Critical"
      - gridcell "‚ö° Performance"
      - gridcell "David Lee David Lee":
        - img "David Lee"
        - text: David Lee
      - gridcell "7/9/2025"
      - gridcell "37%"
      - gridcell "$350"
    - row "Press Space to toggle row selection (unchecked) Add performance benchmarks In Review Critical üß™ Testing JL Jessica Lopez 7/9/2025 74% $750":
      - gridcell "Press Space to toggle row selection (unchecked)":
        - checkbox "Press Space to toggle row selection (unchecked)"
      - gridcell "Add performance benchmarks"
      - gridcell "In Review"
      - gridcell "Critical"
      - gridcell "üß™ Testing"
      - gridcell "JL Jessica Lopez"
      - gridcell "7/9/2025"
      - gridcell "74%"
      - gridcell "$750"
    - row "Press Space to toggle row selection (unchecked) Add drag-and-drop file upload (Performance Sprint) Blocked Critical ‚ú® Feature DK Daniel Kim 7/9/2025 17% $2,125":
      - gridcell "Press Space to toggle row selection (unchecked)":
        - checkbox "Press Space to toggle row selection (unchecked)"
      - gridcell "Add drag-and-drop file upload (Performance Sprint)"
      - gridcell "Blocked"
      - gridcell "Critical"
      - gridcell "‚ú® Feature"
      - gridcell "DK Daniel Kim"
      - gridcell "7/9/2025"
      - gridcell "17%"
      - gridcell "$2,125"
    - row "Press Space to toggle row selection (unchecked) Configure firewall rules (Sprint 26) Backlog Critical üîí Security Emma Davis Emma Davis 7/9/2025 0% $4,200":
      - gridcell "Press Space to toggle row selection (unchecked)":
        - checkbox "Press Space to toggle row selection (unchecked)"
      - gridcell "Configure firewall rules (Sprint 26)"
      - gridcell "Backlog"
      - gridcell "Critical"
      - gridcell "üîí Security"
      - gridcell "Emma Davis Emma Davis":
        - img "Emma Davis"
        - text: Emma Davis
      - gridcell "7/9/2025"
      - gridcell "0%"
      - gridcell "$4,200"
    - row "Press Space to toggle row selection (unchecked) Add drag-and-drop file upload In Progress Critical ‚ú® Feature Michael Anderson Michael Anderson 7/9/2025 49% $975":
      - gridcell "Press Space to toggle row selection (unchecked)":
        - checkbox "Press Space to toggle row selection (unchecked)"
      - gridcell "Add drag-and-drop file upload"
      - gridcell "In Progress"
      - gridcell "Critical"
      - gridcell "‚ú® Feature"
      - gridcell "Michael Anderson Michael Anderson":
        - img "Michael Anderson"
        - text: Michael Anderson
      - gridcell "7/9/2025"
      - gridcell "49%"
      - gridcell "$975"
    - row "Press Space to toggle row selection (unchecked) Optimize memory usage (Sprint 25) In Progress Critical ‚ö° Performance Isabella Garcia Isabella Garcia 7/9/2025 36% $725":
      - gridcell "Press Space to toggle row selection (unchecked)":
        - checkbox "Press Space to toggle row selection (unchecked)"
      - gridcell "Optimize memory usage (Sprint 25)"
      - gridcell "In Progress"
      - gridcell "Critical"
      - gridcell "‚ö° Performance"
      - gridcell "Isabella Garcia Isabella Garcia":
        - img "Isabella Garcia"
        - text: Isabella Garcia
      - gridcell "7/9/2025"
      - gridcell "36%"
      - gridcell "$725"
    - row "Press Space to toggle row selection (unchecked) Implement API key rotation (Q2 Planning) Blocked Critical üîí Security Chris Martinez Chris Martinez 7/9/2025 26% $4,550":
      - gridcell "Press Space to toggle row selection (unchecked)":
        - checkbox "Press Space to toggle row selection (unchecked)"
      - gridcell "Implement API key rotation (Q2 Planning)"
      - gridcell "Blocked"
      - gridcell "Critical"
      - gridcell "üîí Security"
      - gridcell "Chris Martinez Chris Martinez":
        - img "Chris Martinez"
        - text: Chris Martinez
      - gridcell "7/9/2025"
      - gridcell "26%"
      - gridcell "$4,550"
    - row "Press Space to toggle row selection (unchecked) Write API contract tests (Sprint 27) Blocked Critical üß™ Testing David Lee David Lee 7/9/2025 23% $2,800":
      - gridcell "Press Space to toggle row selection (unchecked)":
        - checkbox "Press Space to toggle row selection (unchecked)"
      - gridcell "Write API contract tests (Sprint 27)"
      - gridcell "Blocked"
      - gridcell "Critical"
      - gridcell "üß™ Testing"
      - gridcell "David Lee David Lee":
        - img "David Lee"
        - text: David Lee
      - gridcell "7/9/2025"
      - gridcell "23%"
      - gridcell "$2,800"
    - row "Press Space to toggle row selection (unchecked) Create security penetration tests (Sprint 23) In Progress Critical üß™ Testing Ryan Thomas Ryan Thomas 7/9/2025 55% $300":
      - gridcell "Press Space to toggle row selection (unchecked)":
        - checkbox "Press Space to toggle row selection (unchecked)"
      - gridcell "Create security penetration tests (Sprint 23)"
      - gridcell "In Progress"
      - gridcell "Critical"
      - gridcell "üß™ Testing"
      - gridcell "Ryan Thomas Ryan Thomas":
        - img "Ryan Thomas"
        - text: Ryan Thomas
      - gridcell "7/9/2025"
      - gridcell "55%"
      - gridcell "$300"
    - row "Press Space to toggle row selection (unchecked) Write performance optimization tips (Performance Sprint) Backlog Critical üìù Documentation Ryan Thomas Ryan Thomas 7/9/2025 0% $225":
      - gridcell "Press Space to toggle row selection (unchecked)":
        - checkbox "Press Space to toggle row selection (unchecked)"
      - gridcell "Write performance optimization tips (Performance Sprint)"
      - gridcell "Backlog"
      - gridcell "Critical"
      - gridcell "üìù Documentation"
      - gridcell "Ryan Thomas Ryan Thomas":
        - img "Ryan Thomas"
        - text: Ryan Thomas
      - gridcell "7/9/2025"
      - gridcell "0%"
      - gridcell "$225"
    - row "Press Space to toggle row selection (unchecked) Add database indexing (Performance Sprint) Blocked Critical ‚ö° Performance KZ Kevin Zhang 7/9/2025 31% $225":
      - gridcell "Press Space to toggle row selection (unchecked)":
        - checkbox "Press Space to toggle row selection (unchecked)"
      - gridcell "Add database indexing (Performance Sprint)"
      - gridcell "Blocked"
      - gridcell "Critical"
      - gridcell "‚ö° Performance"
      - gridcell "KZ Kevin Zhang"
      - gridcell "7/9/2025"
      - gridcell "31%"
      - gridcell "$225"
    - row "Press Space to toggle row selection (unchecked) Implement social media sharing (Tech Debt) Backlog Critical ‚ú® Feature Priya Sharma Priya Sharma 7/9/2025 0% $300":
      - gridcell "Press Space to toggle row selection (unchecked)":
        - checkbox "Press Space to toggle row selection (unchecked)"
      - gridcell "Implement social media sharing (Tech Debt)"
      - gridcell "Backlog"
      - gridcell "Critical"
      - gridcell "‚ú® Feature"
      - gridcell "Priya Sharma Priya Sharma":
        - img "Priya Sharma"
        - text: Priya Sharma
      - gridcell "7/9/2025"
      - gridcell "0%"
      - gridcell "$300"
    - row "Press Space to toggle row selection (unchecked) Configure health checks Blocked Critical üîß DevOps Ryan Thomas Ryan Thomas 7/9/2025 23% $2,075":
      - gridcell "Press Space to toggle row selection (unchecked)":
        - checkbox "Press Space to toggle row selection (unchecked)"
      - gridcell "Configure health checks"
      - gridcell "Blocked"
      - gridcell "Critical"
      - gridcell "üîß DevOps"
      - gridcell "Ryan Thomas Ryan Thomas":
        - img "Ryan Thomas"
        - text: Ryan Thomas
      - gridcell "7/9/2025"
      - gridcell "23%"
      - gridcell "$2,075"
    - row "Press Space to toggle row selection (unchecked) Optimize database queries (Tech Debt) Blocked Critical ‚ö° Performance JR John Robinson 7/9/2025 11% $3,225":
      - gridcell "Press Space to toggle row selection (unchecked)":
        - checkbox "Press Space to toggle row selection (unchecked)"
      - gridcell "Optimize database queries (Tech Debt)"
      - gridcell "Blocked"
      - gridcell "Critical"
      - gridcell "‚ö° Performance"
      - gridcell "JR John Robinson"
      - gridcell "7/9/2025"
      - gridcell "11%"
      - gridcell "$3,225"
    - row "Press Space to toggle row selection (unchecked) Create load testing scenarios (Security Audit) Blocked High üß™ Testing AW Amanda White 7/9/2025 17% $925":
      - gridcell "Press Space to toggle row selection (unchecked)":
        - checkbox "Press Space to toggle row selection (unchecked)"
      - gridcell "Create load testing scenarios (Security Audit)"
      - gridcell "Blocked"
      - gridcell "High"
      - gridcell "üß™ Testing"
      - gridcell "AW Amanda White"
      - gridcell "7/9/2025"
      - gridcell "17%"
      - gridcell "$925"
    - row "Press Space to toggle row selection (unchecked) Set up penetration testing In Progress High üîí Security David Lee David Lee 7/9/2025 53% $100":
      - gridcell "Press Space to toggle row selection (unchecked)":
        - checkbox "Press Space to toggle row selection (unchecked)"
      - gridcell "Set up penetration testing"
      - gridcell "In Progress"
      - gridcell "High"
      - gridcell "üîí Security"
      - gridcell "David Lee David Lee":
        - img "David Lee"
        - text: David Lee
      - gridcell "7/9/2025"
      - gridcell "53%"
      - gridcell "$100"
    - row "Press Space to toggle row selection (unchecked) Create data visualization charts Backlog Critical ‚ú® Feature James Wilson James Wilson 7/9/2025 0% $900":
      - gridcell "Press Space to toggle row selection (unchecked)":
        - checkbox "Press Space to toggle row selection (unchecked)"
      - gridcell "Create data visualization charts"
      - gridcell "Backlog"
      - gridcell "Critical"
      - gridcell "‚ú® Feature"
      - gridcell "James Wilson James Wilson":
        - img "James Wilson"
        - text: James Wilson
      - gridcell "7/9/2025"
      - gridcell "0%"
      - gridcell "$900"
    - row "Press Space to toggle row selection (unchecked) Implement social media sharing (Sprint 25) Blocked Critical ‚ú® Feature James Wilson James Wilson 7/9/2025 34% $4,725":
      - gridcell "Press Space to toggle row selection (unchecked)":
        - checkbox "Press Space to toggle row selection (unchecked)"
      - gridcell "Implement social media sharing (Sprint 25)"
      - gridcell "Blocked"
      - gridcell "Critical"
      - gridcell "‚ú® Feature"
      - gridcell "James Wilson James Wilson":
        - img "James Wilson"
        - text: James Wilson
      - gridcell "7/9/2025"
      - gridcell "34%"
      - gridcell "$4,725"
  - rowgroup
  - rowgroup
  - rowgroup
  - rowgroup
  - rowgroup:
    - row:
      - gridcell
  - rowgroup:
    - row "Press Space to toggle row selection (unchecked) $418,800":
      - gridcell "Press Space to toggle row selection (unchecked)":
        - checkbox "Press Space to toggle row selection (unchecked)"
      - gridcell
      - gridcell
      - gridcell
      - gridcell
      - gridcell
      - gridcell
      - gridcell
      - gridcell "$418,800"
  - rowgroup
- tablist:
  - tab "Columns"
  - tab "Filters"
- status: "Rows : 93 of 10,000"
- status: "Total Rows : 10,000 Filtered : 93"
- status
```

# Test source

```ts
   1 | import { test, expect } from "@playwright/test";
   2 |
   3 | test.describe("Simple Filter Test", () => {
   4 |   test("should filter data when DateFilter is initialized with model", async ({
   5 |     page,
   6 |   }) => {
   7 |     // Enable console logging
   8 |     page.on("console", (msg) => {
   9 |       if (
   10 |         msg.text().includes("[DateFilter]") ||
   11 |         msg.text().includes("Row count")
   12 |       ) {
   13 |         console.log("BROWSER:", msg.text());
   14 |       }
   15 |     });
   16 |
   17 |     // Navigate to the demo page
   18 |     await page.goto("/demo");
   19 |
   20 |     // Wait for grid to be ready
   21 |     await page.waitForSelector(".ag-root-wrapper");
   22 |     await page.waitForTimeout(1000);
   23 |
   24 |     // Get initial row count and set a simple filter
   25 |     const result = await page.evaluate(async () => {
   26 |       const api = window.agGridApi;
   27 |       if (!api) return { error: "No API found" };
   28 |
   29 |       const initialRowCount = api.getDisplayedRowCount();
   30 |       console.log("Row count before filter:", initialRowCount);
   31 |
   32 |       // Get some sample dates from the grid
   33 |       const sampleDates: string[] = [];
   34 |       api.forEachNode((node, index) => {
   35 |         if (index < 5 && node.data && node.data.dueDate) {
   36 |           sampleDates.push(new Date(node.data.dueDate).toISOString());
   37 |         }
   38 |       });
   39 |
   40 |       // Set a filter for "Today" (which should match no rows since data is in the future)
   41 |       const filterModel = {
   42 |         dueDate: {
   43 |           mode: "relative",
   44 |           type: "equals",
   45 |           expressionFrom: "Today",
   46 |         },
   47 |       };
   48 |
   49 |       console.log("Setting filter model:", JSON.stringify(filterModel));
   50 |       api.setFilterModel(filterModel);
   51 |
   52 |       // Force grid to refresh
   53 |       api.onFilterChanged();
   54 |
   55 |       // Wait a bit for React to update
   56 |       await new Promise((resolve) => setTimeout(resolve, 500));
   57 |
   58 |       const finalRowCount = api.getDisplayedRowCount();
   59 |       console.log("Row count after filter:", finalRowCount);
   60 |
   61 |       // Get filter instance info
   62 |       const filterInstance = await api.getColumnFilterInstance("dueDate");
   63 |       const filterInstanceInfo = {
   64 |         hasInstance: !!filterInstance,
   65 |         hasDoesFilterPass: typeof filterInstance?.doesFilterPass === "function",
   66 |         currentModel: filterInstance?.getModel
   67 |           ? filterInstance.getModel()
   68 |           : null,
   69 |       };
   70 |
   71 |       return {
   72 |         initialRowCount,
   73 |         finalRowCount,
   74 |         filterChanged: initialRowCount !== finalRowCount,
   75 |         sampleDates,
   76 |         filterInstanceInfo,
   77 |         currentFilterModel: api.getFilterModel(),
   78 |       };
   79 |     });
   80 |
   81 |     console.log("Test result:", JSON.stringify(result, null, 2));
   82 |
   83 |     // The filter should have changed the row count
   84 |     expect(result.filterChanged).toBe(true);
   85 |
   86 |     // Since we're filtering for "Today" and all data is in the future,
   87 |     // we expect 0 rows
>  88 |     expect(result.finalRowCount).toBe(0);
      |                                  ^ Error: expect(received).toBe(expected) // Object.is equality
   89 |   });
   90 |
   91 |   test("should show some rows when filtering for future dates", async ({
   92 |     page,
   93 |   }) => {
   94 |     // Navigate to the demo page
   95 |     await page.goto("/demo");
   96 |
   97 |     // Wait for grid to be ready
   98 |     await page.waitForSelector(".ag-root-wrapper");
   99 |     await page.waitForTimeout(1000);
  100 |
  101 |     // Set a filter for future dates
  102 |     const result = await page.evaluate(async () => {
  103 |       const api = window.agGridApi;
  104 |       if (!api) return { error: "No API found" };
  105 |
  106 |       const initialRowCount = api.getDisplayedRowCount();
  107 |
  108 |       // Set a filter for dates after today (should include all future dates)
  109 |       const filterModel = {
  110 |         dueDate: {
  111 |           mode: "relative",
  112 |           type: "after",
  113 |           expressionFrom: "Today",
  114 |           fromInclusive: false,
  115 |         },
  116 |       };
  117 |
  118 |       api.setFilterModel(filterModel);
  119 |       api.onFilterChanged();
  120 |
  121 |       await new Promise((resolve) => setTimeout(resolve, 500));
  122 |
  123 |       const finalRowCount = api.getDisplayedRowCount();
  124 |
  125 |       return {
  126 |         initialRowCount,
  127 |         finalRowCount,
  128 |         filterChanged: initialRowCount !== finalRowCount,
  129 |         currentFilterModel: api.getFilterModel(),
  130 |       };
  131 |     });
  132 |
  133 |     console.log("Future dates test result:", JSON.stringify(result, null, 2));
  134 |
  135 |     // Since all data is in the future, filtering for "after Today" should keep most/all rows
  136 |     expect(result.finalRowCount).toBeGreaterThan(0);
  137 |   });
  138 | });
  139 |
```